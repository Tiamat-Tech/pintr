function t(t){const{data:a}=t.getImageData(0,0,t.canvas.width,t.canvas.height),{width:e,height:h}=t.canvas;let i=[];for(let n=0;n<h;n++)for(let t=0;t<e;t++)i[t]||(i[t]=[]),i[t][n]={r:a[n*e*4+4*t],g:a[n*e*4+4*t+1],b:a[n*e*4+4*t+2],a:a[n*e*4+4*t+3]};return i}function a(t,a={}){const{crop:e=!0,size:h}=a;return new Promise((i=>{const n=new window.Image;n.onload=function(){const t=a.canvas||document.createElement("canvas"),o=t.getContext("2d");let c=1;h&&(c=h/Math.max(n.width,n.height)),a.maxSize&&(n.width>a.maxSize||n.height>a.maxSize)&&(c=a.maxSize/Math.max(n.width,n.height));const g=Math.floor(n.width*c),s=Math.floor(n.height*c);if(e){t.width=h,t.height=h;const a=Math.min(n.width,n.height);o.drawImage(n,(n.width-a)/2,(n.height-a)/2,a,a,0,0,h,h)}else t.width=g,t.height=s,o.drawImage(n,0,0,g,s);const d=o.getImageData(0,0,o.canvas.width,o.canvas.height);d.ctx=o,i(d)},n.src=t}))}export{t as c,a as i};
